
{% extends "lims/base.html" %}

{% block title %}Bulk Add New Samples{% endblock %}

{% block content_title %}Bulk Add New Samples{% endblock %}

{% block object_tools %}
    <ul class="object-tools">
        {% if view.request.user.is_staff %}
             <li><a href="{% url 'admin:lims_sample_add' %}">Admin View</a></li>
        {% endif %}
        <li><a class="addlink" href="{% url 'lims:sample_add' %}">Add Sample</a></li>
    </ul>
{% endblock %}

{% block content_main %}

    <div id="add-formset-container">
        <form id="add-formset-form" action="" method="post">
            {% csrf_token %}
            {{ form.management_form }}
            <ul id="add-formset-list">
            <li class="add-formset-item">
                <ul class="add-formset-fieldlist" id="add-formset-header">
                    {% for field in form.0 %}
                        {% if not field.is_hidden %}
                            <li>{{ field.label_tag }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </li>
            <li class="add-formset-item">
                <ul class="add-formset-fieldlist" id="add-formset-tools">
                    {% for field in form.0 %}
                        {% if not field.is_hidden %}
                            <li>
                                {% if field.name == 'collected' %}
                                    <a href="#" id="{{ field.name }}-today">Today</a> /
                                {% endif %}
                                <a href="#" id="{{ field.name }}-fill">Fill down</a> /
                                <a href="#" id="{{ field.name }}-clear">Clear</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </li>
                {% for sub_form in form %}
                    <li class="add-formset-item">
                        <ul class="add-formset-fieldlist">
                            {{ sub_form.as_ul }}
                        </ul>
                    </li>
                {% endfor %}
            </ul>
            <p>
                Add <input id="add-formset-more-number" type="text" size="2" title="Add" value="1"/> more forms
                <a href="#" id="add-formset-more-go">Go</a>
            </p>
            <p>
                Add tag column for tags (separate with comma):
                <input name="add-formset-tag-column" type="text" size="10" title="Add" value=""/>
                <button id="add-formset-tag-column-go">Go</button>
            </p>
        <input type="submit" value="Add samples" />
        </form>
    </div>

{% endblock %}

{% block scripts %}
    {{ block.super }}
    {% load static %}
    <script src="{% static 'lims/js/sample_bulk_form.js' %}"></script>
{% endblock %}
